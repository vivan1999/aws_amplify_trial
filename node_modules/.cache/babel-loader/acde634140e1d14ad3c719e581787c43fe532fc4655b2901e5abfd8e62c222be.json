{"ast":null,"code":"import { proxyCustomElement, HTMLElement, createEvent, h, Host } from '@stencil/core/internal/client';\nimport { c as createCommonjsModule, g as getDefaultExportFromCjs, a as commonjsRequire } from './_commonjsHelpers.js';\nimport { r as renderDefaultItem } from './default-tree-item.js';\nimport { d as defineCustomElement$2 } from './tree-item.js';\nvar hyperlist = createCommonjsModule(function (module, exports) {\n  (function (f) {\n    {\n      module.exports = f();\n    }\n  })(function () {\n    return function () {\n      function r(e, n, t) {\n        function o(i, f) {\n          if (!n[i]) {\n            if (!e[i]) {\n              var c = \"function\" == typeof commonjsRequire && commonjsRequire;\n              if (!f && c) return c(i, !0);\n              if (u) return u(i, !0);\n              var a = new Error(\"Cannot find module '\" + i + \"'\");\n              throw a.code = \"MODULE_NOT_FOUND\", a;\n            }\n            var p = n[i] = {\n              exports: {}\n            };\n            e[i][0].call(p.exports, function (r) {\n              var n = e[i][1][r];\n              return o(n || r);\n            }, p, p.exports, r, e, n, t);\n          }\n          return n[i].exports;\n        }\n        for (var u = \"function\" == typeof commonjsRequire && commonjsRequire, i = 0; i < t.length; i++) o(t[i]);\n        return o;\n      }\n      return r;\n    }()({\n      1: [function (_dereq_, module, exports) {\n        // Default configuration.\n\n        Object.defineProperty(exports, \"__esModule\", {\n          value: true\n        });\n        var _createClass = function () {\n          function defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n              var descriptor = props[i];\n              descriptor.enumerable = descriptor.enumerable || false;\n              descriptor.configurable = true;\n              if (\"value\" in descriptor) descriptor.writable = true;\n              Object.defineProperty(target, descriptor.key, descriptor);\n            }\n          }\n          return function (Constructor, protoProps, staticProps) {\n            if (protoProps) defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) defineProperties(Constructor, staticProps);\n            return Constructor;\n          };\n        }();\n        function _defineProperty(obj, key, value) {\n          if (key in obj) {\n            Object.defineProperty(obj, key, {\n              value: value,\n              enumerable: true,\n              configurable: true,\n              writable: true\n            });\n          } else {\n            obj[key] = value;\n          }\n          return obj;\n        }\n        function _classCallCheck(instance, Constructor) {\n          if (!(instance instanceof Constructor)) {\n            throw new TypeError(\"Cannot call a class as a function\");\n          }\n        }\n        var defaultConfig = {\n          width: '100%',\n          height: '100%'\n\n          // Check for valid number.\n        };\n        var isNumber = function isNumber(input) {\n          return Number(input) === Number(input);\n        };\n\n        // Add a class to an element.\n        var addClass = 'classList' in document.documentElement ? function (element, className) {\n          element.classList.add(className);\n        } : function (element, className) {\n          var oldClass = element.getAttribute('class') || '';\n          element.setAttribute('class', oldClass + ' ' + className);\n        };\n\n        /**\n         * Creates a HyperList instance that virtually scrolls very large amounts of\n         * data effortlessly.\n         */\n\n        var HyperList = function () {\n          _createClass(HyperList, null, [{\n            key: 'create',\n            value: function create(element, userProvidedConfig) {\n              return new HyperList(element, userProvidedConfig);\n            }\n\n            /**\n             * Merge given css style on an element\n             * @param {DOMElement} element\n             * @param {Object} style\n             */\n          }, {\n            key: 'mergeStyle',\n            value: function mergeStyle(element, style) {\n              for (var i in style) {\n                if (element.style[i] !== style[i]) {\n                  element.style[i] = style[i];\n                }\n              }\n            }\n          }, {\n            key: 'getMaxBrowserHeight',\n            value: function getMaxBrowserHeight() {\n              // Create two elements, the wrapper is `1px` tall and is transparent and\n              // positioned at the top of the page. Inside that is an element that gets\n              // set to 1 billion pixels. Then reads the max height the browser can\n              // calculate.\n              var wrapper = document.createElement('div');\n              var fixture = document.createElement('div');\n\n              // As said above, these values get set to put the fixture elements into the\n              // right visual state.\n              HyperList.mergeStyle(wrapper, {\n                position: 'absolute',\n                height: '1px',\n                opacity: 0\n              });\n              HyperList.mergeStyle(fixture, {\n                height: '1e7px'\n              });\n\n              // Add the fixture into the wrapper element.\n              wrapper.appendChild(fixture);\n\n              // Apply to the page, the values won't kick in unless this is attached.\n              document.body.appendChild(wrapper);\n\n              // Get the maximum element height in pixels.\n              var maxElementHeight = fixture.offsetHeight;\n\n              // Remove the element immediately after reading the value.\n              document.body.removeChild(wrapper);\n              return maxElementHeight;\n            }\n          }]);\n          function HyperList(element, userProvidedConfig) {\n            var _this = this;\n            _classCallCheck(this, HyperList);\n            this._config = {};\n            this._lastRepaint = null;\n            this._maxElementHeight = HyperList.getMaxBrowserHeight();\n            this.refresh(element, userProvidedConfig);\n            var config = this._config;\n\n            // Create internal render loop.\n            var render = function render() {\n              var scrollTop = _this._getScrollPosition();\n              var lastRepaint = _this._lastRepaint;\n              _this._renderAnimationFrame = window.requestAnimationFrame(render);\n              if (scrollTop === lastRepaint) {\n                return;\n              }\n              var diff = lastRepaint ? scrollTop - lastRepaint : 0;\n              if (!lastRepaint || diff < 0 || diff > _this._averageHeight) {\n                var rendered = _this._renderChunk();\n                _this._lastRepaint = scrollTop;\n                if (rendered !== false && typeof config.afterRender === 'function') {\n                  config.afterRender();\n                }\n              }\n            };\n            render();\n          }\n          _createClass(HyperList, [{\n            key: 'destroy',\n            value: function destroy() {\n              window.cancelAnimationFrame(this._renderAnimationFrame);\n            }\n          }, {\n            key: 'refresh',\n            value: function refresh(element, userProvidedConfig) {\n              var _scrollerStyle;\n              Object.assign(this._config, defaultConfig, userProvidedConfig);\n              if (!element || element.nodeType !== 1) {\n                throw new Error('HyperList requires a valid DOM Node container');\n              }\n              this._element = element;\n              var config = this._config;\n              var scroller = this._scroller || config.scroller || document.createElement(config.scrollerTagName || 'tr');\n\n              // Default configuration option `useFragment` to `true`.\n              if (typeof config.useFragment !== 'boolean') {\n                this._config.useFragment = true;\n              }\n              if (!config.generate) {\n                throw new Error('Missing required `generate` function');\n              }\n              if (!isNumber(config.total)) {\n                throw new Error('Invalid required `total` value, expected number');\n              }\n              if (!Array.isArray(config.itemHeight) && !isNumber(config.itemHeight)) {\n                throw new Error('\\n        Invalid required `itemHeight` value, expected number or array\\n      '.trim());\n              } else if (isNumber(config.itemHeight)) {\n                this._itemHeights = Array(config.total).fill(config.itemHeight);\n              } else {\n                this._itemHeights = config.itemHeight;\n              }\n\n              // Width and height should be coerced to string representations. Either in\n              // `%` or `px`.\n              Object.keys(defaultConfig).filter(function (prop) {\n                return prop in config;\n              }).forEach(function (prop) {\n                var value = config[prop];\n                var isValueNumber = isNumber(value);\n                if (value && typeof value !== 'string' && typeof value !== 'number') {\n                  var msg = 'Invalid optional `' + prop + '`, expected string or number';\n                  throw new Error(msg);\n                } else if (isValueNumber) {\n                  config[prop] = value + 'px';\n                }\n              });\n              var isHoriz = Boolean(config.horizontal);\n              var value = config[isHoriz ? 'width' : 'height'];\n              if (value) {\n                var isValueNumber = isNumber(value);\n                var isValuePercent = isValueNumber ? false : value.slice(-1) === '%';\n                // Compute the containerHeight as number\n                var numberValue = isValueNumber ? value : parseInt(value.replace(/px|%/, ''), 10);\n                var innerSize = window[isHoriz ? 'innerWidth' : 'innerHeight'];\n                if (isValuePercent) {\n                  this._containerSize = innerSize * numberValue / 100;\n                } else {\n                  this._containerSize = isNumber(value) ? value : numberValue;\n                }\n              }\n              var scrollContainer = config.scrollContainer;\n              var scrollerHeight = config.itemHeight * config.total;\n              var maxElementHeight = this._maxElementHeight;\n              if (scrollerHeight > maxElementHeight) {\n                console.warn(['HyperList: The maximum element height', maxElementHeight + 'px has', 'been exceeded; please reduce your item height.'].join(' '));\n              }\n\n              // Decorate the container element with styles that will match\n              // the user supplied configuration.\n              var elementStyle = {\n                width: '' + config.width,\n                height: scrollContainer ? scrollerHeight + 'px' : '' + config.height,\n                overflow: scrollContainer ? 'none' : 'auto',\n                position: 'relative'\n              };\n              HyperList.mergeStyle(element, elementStyle);\n              if (scrollContainer) {\n                HyperList.mergeStyle(config.scrollContainer, {\n                  overflow: 'auto'\n                });\n              }\n              var scrollerStyle = (_scrollerStyle = {\n                opacity: '0',\n                position: 'absolute'\n              }, _defineProperty(_scrollerStyle, isHoriz ? 'height' : 'width', '1px'), _defineProperty(_scrollerStyle, isHoriz ? 'width' : 'height', scrollerHeight + 'px'), _scrollerStyle);\n              HyperList.mergeStyle(scroller, scrollerStyle);\n\n              // Only append the scroller element once.\n              if (!this._scroller) {\n                element.appendChild(scroller);\n              }\n              var padding = this._computeScrollPadding();\n              this._scrollPaddingBottom = padding.bottom;\n              this._scrollPaddingTop = padding.top;\n\n              // Set the scroller instance.\n              this._scroller = scroller;\n              this._scrollHeight = this._computeScrollHeight();\n\n              // Reuse the item positions if refreshed, otherwise set to empty array.\n              this._itemPositions = this._itemPositions || Array(config.total).fill(0);\n\n              // Each index in the array should represent the position in the DOM.\n              this._computePositions(0);\n\n              // Render after refreshing. Force render if we're calling refresh manually.\n              this._renderChunk(this._lastRepaint !== null);\n              if (typeof config.afterRender === 'function') {\n                config.afterRender();\n              }\n            }\n          }, {\n            key: '_getRow',\n            value: function _getRow(i) {\n              var config = this._config;\n              var item = config.generate(i);\n              var height = item.height;\n              if (height !== undefined && isNumber(height)) {\n                item = item.element;\n\n                // The height isn't the same as predicted, compute positions again\n                if (height !== this._itemHeights[i]) {\n                  this._itemHeights[i] = height;\n                  this._computePositions(i);\n                  this._scrollHeight = this._computeScrollHeight(i);\n                }\n              } else {\n                height = this._itemHeights[i];\n              }\n              if (!item || item.nodeType !== 1) {\n                throw new Error('Generator did not return a DOM Node for index: ' + i);\n              }\n              addClass(item, config.rowClassName || 'vrow');\n              var top = this._itemPositions[i] + this._scrollPaddingTop;\n              HyperList.mergeStyle(item, _defineProperty({\n                position: 'absolute'\n              }, config.horizontal ? 'left' : 'top', top + 'px'));\n              return item;\n            }\n          }, {\n            key: '_getScrollPosition',\n            value: function _getScrollPosition() {\n              var config = this._config;\n              if (typeof config.overrideScrollPosition === 'function') {\n                return config.overrideScrollPosition();\n              }\n              return this._element[config.horizontal ? 'scrollLeft' : 'scrollTop'];\n            }\n          }, {\n            key: '_renderChunk',\n            value: function _renderChunk(force) {\n              var config = this._config;\n              var element = this._element;\n              var scrollTop = this._getScrollPosition();\n              var total = config.total;\n              var from = config.reverse ? this._getReverseFrom(scrollTop) : this._getFrom(scrollTop) - 1;\n              if (from < 0 || from - this._screenItemsLen < 0) {\n                from = 0;\n              }\n              if (!force && this._lastFrom === from) {\n                return false;\n              }\n              this._lastFrom = from;\n              var to = from + this._cachedItemsLen;\n              if (to > total || to + this._cachedItemsLen > total) {\n                to = total;\n              }\n\n              // Append all the new rows in a document fragment that we will later append\n              // to the parent node\n              var fragment = config.useFragment ? document.createDocumentFragment() : []\n              // Sometimes you'll pass fake elements to this tool and Fragments require\n              // real elements.\n\n              // The element that forces the container to scroll.\n              ;\n              var scroller = this._scroller;\n\n              // Keep the scroller in the list of children.\n              fragment[config.useFragment ? 'appendChild' : 'push'](scroller);\n              for (var i = from; i < to; i++) {\n                var row = this._getRow(i);\n                fragment[config.useFragment ? 'appendChild' : 'push'](row);\n              }\n              if (config.applyPatch) {\n                return config.applyPatch(element, fragment);\n              }\n              element.innerHTML = '';\n              element.appendChild(fragment);\n            }\n          }, {\n            key: '_computePositions',\n            value: function _computePositions() {\n              var from = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n              var config = this._config;\n              var total = config.total;\n              var reverse = config.reverse;\n              if (from < 1 && !reverse) {\n                from = 1;\n              }\n              for (var i = from; i < total; i++) {\n                if (reverse) {\n                  if (i === 0) {\n                    this._itemPositions[0] = this._scrollHeight - this._itemHeights[0];\n                  } else {\n                    this._itemPositions[i] = this._itemPositions[i - 1] - this._itemHeights[i];\n                  }\n                } else {\n                  this._itemPositions[i] = this._itemHeights[i - 1] + this._itemPositions[i - 1];\n                }\n              }\n            }\n          }, {\n            key: '_computeScrollHeight',\n            value: function _computeScrollHeight() {\n              var _HyperList$mergeStyle2,\n                _this2 = this;\n              var config = this._config;\n              var isHoriz = Boolean(config.horizontal);\n              var total = config.total;\n              var scrollHeight = this._itemHeights.reduce(function (a, b) {\n                return a + b;\n              }, 0) + this._scrollPaddingBottom + this._scrollPaddingTop;\n              HyperList.mergeStyle(this._scroller, (_HyperList$mergeStyle2 = {\n                opacity: 0,\n                position: 'absolute',\n                top: '0px'\n              }, _defineProperty(_HyperList$mergeStyle2, isHoriz ? 'height' : 'width', '1px'), _defineProperty(_HyperList$mergeStyle2, isHoriz ? 'width' : 'height', scrollHeight + 'px'), _HyperList$mergeStyle2));\n\n              // Calculate the height median\n              var sortedItemHeights = this._itemHeights.slice(0).sort(function (a, b) {\n                return a - b;\n              });\n              var middle = Math.floor(total / 2);\n              var averageHeight = total % 2 === 0 ? (sortedItemHeights[middle] + sortedItemHeights[middle - 1]) / 2 : sortedItemHeights[middle];\n              var clientProp = isHoriz ? 'clientWidth' : 'clientHeight';\n              var element = config.scrollContainer ? config.scrollContainer : this._element;\n              var containerHeight = element[clientProp] ? element[clientProp] : this._containerSize;\n              this._screenItemsLen = Math.ceil(containerHeight / averageHeight);\n              this._containerSize = containerHeight;\n\n              // Cache 3 times the number of items that fit in the container viewport.\n              this._cachedItemsLen = Math.max(this._cachedItemsLen || 0, this._screenItemsLen * 3);\n              this._averageHeight = averageHeight;\n              if (config.reverse) {\n                window.requestAnimationFrame(function () {\n                  if (isHoriz) {\n                    _this2._element.scrollLeft = scrollHeight;\n                  } else {\n                    _this2._element.scrollTop = scrollHeight;\n                  }\n                });\n              }\n              return scrollHeight;\n            }\n          }, {\n            key: '_computeScrollPadding',\n            value: function _computeScrollPadding() {\n              var config = this._config;\n              var isHoriz = Boolean(config.horizontal);\n              var isReverse = config.reverse;\n              var styles = window.getComputedStyle(this._element);\n              var padding = function padding(location) {\n                var cssValue = styles.getPropertyValue('padding-' + location);\n                return parseInt(cssValue, 10) || 0;\n              };\n              if (isHoriz && isReverse) {\n                return {\n                  bottom: padding('left'),\n                  top: padding('right')\n                };\n              } else if (isHoriz) {\n                return {\n                  bottom: padding('right'),\n                  top: padding('left')\n                };\n              } else if (isReverse) {\n                return {\n                  bottom: padding('top'),\n                  top: padding('bottom')\n                };\n              } else {\n                return {\n                  bottom: padding('bottom'),\n                  top: padding('top')\n                };\n              }\n            }\n          }, {\n            key: '_getFrom',\n            value: function _getFrom(scrollTop) {\n              var i = 0;\n              while (this._itemPositions[i] < scrollTop) {\n                i++;\n              }\n              return i;\n            }\n          }, {\n            key: '_getReverseFrom',\n            value: function _getReverseFrom(scrollTop) {\n              var i = this._config.total - 1;\n              while (i > 0 && this._itemPositions[i] < scrollTop + this._containerSize) {\n                i--;\n              }\n              return i;\n            }\n          }]);\n          return HyperList;\n        }();\n        exports.default = HyperList;\n        module.exports = exports['default'];\n      }, {}]\n    }, {}, [1])(1);\n  });\n});\nconst Hyperlist = /*@__PURE__*/getDefaultExportFromCjs(hyperlist);\nconst treeCss = \":host{display:block}\";\nconst Tree = /*@__PURE__*/proxyCustomElement(class Tree extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    this.__attachShadow();\n    this.contextChange = createEvent(this, \"contextChange\", 7);\n    this.nodeToggled = createEvent(this, \"nodeToggled\", 7);\n    this.nodeClicked = createEvent(this, \"nodeClicked\", 7);\n    this.nodeRemoved = createEvent(this, \"nodeRemoved\", 7);\n    this.toggleListener = new Map();\n    this.itemClickListener = new Map();\n    this.updates = new Map();\n    this.hasFirstRender = false;\n    this.root = undefined;\n    this.model = undefined;\n    this.renderItem = undefined;\n    this.context = {};\n  }\n  updatePadding(element, item) {\n    element.style.paddingLeft = item.level + 'rem';\n  }\n  getVirtualizerOptions() {\n    const list = this.buildTreeList(this.model[this.root]);\n    let setToggleListener = (item, el, index) => {\n      if (item.hasChildren && !this.toggleListener.has(el)) {\n        const toggleCallback = e => {\n          e.preventDefault();\n          e.stopPropagation();\n          const context = this.getContext(list[index].id);\n          context.isExpanded = !context.isExpanded;\n          this.nodeToggled.emit({\n            id: item.id,\n            isExpaned: context.isExpanded\n          });\n          this.setContext(item.id, context);\n        };\n        el.addEventListener('toggle', toggleCallback);\n        this.toggleListener.set(el, toggleCallback);\n      }\n    };\n    return {\n      itemHeight: 32,\n      total: list.length,\n      generate: index => {\n        const item = list[index];\n        const renderedTreeItem = this.hostElement.querySelector(`[data-tree-node-id=\"${item.id}\"]`);\n        const context = this.getContext(item.id);\n        if (renderedTreeItem) {\n          renderedTreeItem.hasChildren = item.hasChildren;\n          renderedTreeItem.context = Object.assign({}, context);\n          setToggleListener(item, renderedTreeItem, index);\n          if (this.updates.has(item.id)) {\n            const doUpdate = this.updates.get(item.id);\n            doUpdate(item, Object.assign({}, this.context));\n          }\n          this.updatePadding(renderedTreeItem, item);\n          return renderedTreeItem;\n        }\n        const update = callback => {\n          this.updates.set(item.id, callback);\n        };\n        let innerElement = null;\n        if (this.renderItem) {\n          innerElement = this.renderItem(index, item, list, Object.assign({}, this.context), update);\n        }\n        if (innerElement === null) {\n          innerElement = renderDefaultItem(item, context, update);\n        }\n        const el = innerElement;\n        el.setAttribute('data-tree-node-id', item.id);\n        el.style.paddingRight = '1rem';\n        this.updatePadding(el, item);\n        if (!this.itemClickListener.has(el)) {\n          const itemClickCallback = e => {\n            e.preventDefault();\n            e.stopPropagation();\n            Object.values(this.context).forEach(c => c.isSelected = false);\n            const context = this.getContext(item.id);\n            context.isSelected = true;\n            this.setContext(item.id, context);\n            this.nodeClicked.emit(item.id);\n          };\n          el.addEventListener('itemClick', itemClickCallback);\n          this.itemClickListener.set(el, itemClickCallback);\n        }\n        setToggleListener(item, el, index);\n        return el;\n      }\n    };\n  }\n  setContext(id, context) {\n    this.context = Object.assign(Object.assign({}, this.context), {\n      [id]: context\n    });\n    this.contextChange.emit(this.context);\n  }\n  getContext(id) {\n    if (!this.context) {\n      return {\n        isExpanded: false,\n        isSelected: false\n      };\n    }\n    if (!this.context[id]) {\n      this.context[id] = {\n        isExpanded: false,\n        isSelected: false\n      };\n    }\n    return this.context[id];\n  }\n  buildTreeList(root, level = 0) {\n    const itemList = [];\n    if (root === null || root === void 0 ? void 0 : root.hasChildren) {\n      const newLevel = level + 1;\n      root.children.forEach(id => {\n        const item = this.model[id];\n        const context = this.getContext(id);\n        itemList.push(Object.assign(Object.assign({}, item), {\n          level\n        }));\n        if (item.hasChildren && context.isExpanded) {\n          itemList.push(...this.buildTreeList(item, newLevel));\n        }\n      });\n    }\n    return itemList;\n  }\n  componentDidLoad() {\n    this.initList();\n    this.observer = new MutationObserver(records => {\n      let removed = [];\n      records.forEach(record => {\n        removed = [...removed, ...Array.from(record.removedNodes)];\n        record.addedNodes.forEach(an => {\n          const index = removed.indexOf(an);\n          if (index >= 0) {\n            removed.splice(index, 1);\n          }\n        });\n      });\n      this.nodeRemoved.emit(removed);\n    });\n    this.observer.observe(this.hostElement, {\n      childList: true\n    });\n  }\n  componentWillRender() {\n    this.hasFirstRender = true;\n    if (this.isListInitialized()) {\n      this.refreshList();\n    } else {\n      this.initList();\n    }\n  }\n  disconnectedCallback() {\n    var _a, _b;\n    (_a = this.hyperlist) === null || _a === void 0 ? void 0 : _a.destroy();\n    (_b = this.observer) === null || _b === void 0 ? void 0 : _b.disconnect();\n  }\n  modelChange() {\n    if (this.hasFirstRender && !this.isListInitialized()) {\n      this.initList();\n    }\n  }\n  isListInitialized() {\n    var _a;\n    const itemPositions = (_a = this.hyperlist) === null || _a === void 0 ? void 0 : _a._itemPositions;\n    return itemPositions !== undefined && itemPositions.length && !(itemPositions === null || itemPositions === void 0 ? void 0 : itemPositions.some(item => item === undefined || Number.isNaN(item)));\n  }\n  refreshList() {\n    if (this.hyperlist) {\n      this.hyperlist.refresh(this.hostElement, this.getVirtualizerOptions());\n    }\n  }\n  initList() {\n    var _a;\n    if (!this.model) {\n      return;\n    }\n    (_a = this.hyperlist) === null || _a === void 0 ? void 0 : _a.destroy();\n    const config = this.getVirtualizerOptions();\n    this.hyperlist = new Hyperlist(this.hostElement, config);\n  }\n  render() {\n    return h(Host, null, h(\"slot\", null));\n  }\n  get hostElement() {\n    return this;\n  }\n  static get watchers() {\n    return {\n      \"model\": [\"modelChange\"]\n    };\n  }\n  static get style() {\n    return treeCss;\n  }\n}, [1, \"ix-tree\", {\n  \"root\": [1],\n  \"model\": [16],\n  \"renderItem\": [16],\n  \"context\": [1040]\n}]);\nfunction defineCustomElement$1() {\n  if (typeof customElements === \"undefined\") {\n    return;\n  }\n  const components = [\"ix-tree\", \"ix-tree-item\"];\n  components.forEach(tagName => {\n    switch (tagName) {\n      case \"ix-tree\":\n        if (!customElements.get(tagName)) {\n          customElements.define(tagName, Tree);\n        }\n        break;\n      case \"ix-tree-item\":\n        if (!customElements.get(tagName)) {\n          defineCustomElement$2();\n        }\n        break;\n    }\n  });\n}\nconst IxTree = Tree;\nconst defineCustomElement = defineCustomElement$1;\nexport { IxTree, defineCustomElement };","map":{"version":3,"names":["f","module","exports","r","e","n","t","o","i","c","commonjsRequire","u","a","Error","code","p","call","length","_dereq_","Object","defineProperty","value","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_defineProperty","obj","_classCallCheck","instance","TypeError","defaultConfig","width","height","isNumber","input","Number","addClass","document","documentElement","element","className","classList","add","oldClass","getAttribute","setAttribute","HyperList","create","userProvidedConfig","mergeStyle","style","getMaxBrowserHeight","wrapper","createElement","fixture","position","opacity","appendChild","body","maxElementHeight","offsetHeight","removeChild","_this","_config","_lastRepaint","_maxElementHeight","refresh","config","render","scrollTop","_getScrollPosition","lastRepaint","_renderAnimationFrame","window","requestAnimationFrame","diff","_averageHeight","rendered","_renderChunk","afterRender","destroy","cancelAnimationFrame","_scrollerStyle","assign","nodeType","_element","scroller","_scroller","scrollerTagName","useFragment","generate","total","Array","isArray","itemHeight","trim","_itemHeights","fill","keys","filter","prop","forEach","isValueNumber","msg","isHoriz","Boolean","horizontal","isValuePercent","slice","numberValue","parseInt","replace","innerSize","_containerSize","scrollContainer","scrollerHeight","console","warn","join","elementStyle","overflow","scrollerStyle","padding","_computeScrollPadding","_scrollPaddingBottom","bottom","_scrollPaddingTop","top","_scrollHeight","_computeScrollHeight","_itemPositions","_computePositions","_getRow","item","undefined","rowClassName","overrideScrollPosition","force","from","reverse","_getReverseFrom","_getFrom","_screenItemsLen","_lastFrom","to","_cachedItemsLen","fragment","createDocumentFragment","row","applyPatch","innerHTML","arguments","_HyperList$mergeStyle2","_this2","scrollHeight","reduce","b","sortedItemHeights","sort","middle","Math","floor","averageHeight","clientProp","containerHeight","ceil","max","scrollLeft","isReverse","styles","getComputedStyle","location","cssValue","getPropertyValue","default","treeCss","Tree","proxyCustomElement","HTMLElement","toggleListener","Map","itemClickListener","updates","hasFirstRender","updatePadding","paddingLeft","level","getVirtualizerOptions","list","buildTreeList","model","root","setToggleListener","el","index","hasChildren","has","toggleCallback","preventDefault","stopPropagation","context","getContext","id","isExpanded","nodeToggled","emit","isExpaned","setContext","addEventListener","set","renderedTreeItem","hostElement","querySelector","doUpdate","get","update","callback","innerElement","renderItem","renderDefaultItem","paddingRight","itemClickCallback","values","isSelected","nodeClicked","contextChange","itemList","newLevel","children","push","componentDidLoad","initList","observer","MutationObserver","records","removed","record","removedNodes","addedNodes","an","indexOf","splice","nodeRemoved","observe","childList","componentWillRender","isListInitialized","refreshList","disconnectedCallback","_a","hyperlist","_b","disconnect","modelChange","itemPositions","some","isNaN","Hyperlist","h","Host"],"sources":["D:\\pci_project_new\\node_modules\\@siemens\\node_modules\\hyperlist\\dist\\hyperlist.js","D:\\pci_project_new\\node_modules\\@siemens\\ix\\components\\src\\components\\tree\\tree.css?tag=ix-tree&encapsulation=shadow","D:\\pci_project_new\\node_modules\\@siemens\\ix\\components\\src\\components\\tree\\tree.tsx"],"sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.HyperList = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(_dereq_,module,exports){\n'use strict';\n\n// Default configuration.\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar defaultConfig = {\n  width: '100%',\n  height: '100%'\n\n  // Check for valid number.\n};var isNumber = function isNumber(input) {\n  return Number(input) === Number(input);\n};\n\n// Add a class to an element.\nvar addClass = 'classList' in document.documentElement ? function (element, className) {\n  element.classList.add(className);\n} : function (element, className) {\n  var oldClass = element.getAttribute('class') || '';\n  element.setAttribute('class', oldClass + ' ' + className);\n};\n\n/**\n * Creates a HyperList instance that virtually scrolls very large amounts of\n * data effortlessly.\n */\n\nvar HyperList = function () {\n  _createClass(HyperList, null, [{\n    key: 'create',\n    value: function create(element, userProvidedConfig) {\n      return new HyperList(element, userProvidedConfig);\n    }\n\n    /**\n     * Merge given css style on an element\n     * @param {DOMElement} element\n     * @param {Object} style\n     */\n\n  }, {\n    key: 'mergeStyle',\n    value: function mergeStyle(element, style) {\n      for (var i in style) {\n        if (element.style[i] !== style[i]) {\n          element.style[i] = style[i];\n        }\n      }\n    }\n  }, {\n    key: 'getMaxBrowserHeight',\n    value: function getMaxBrowserHeight() {\n      // Create two elements, the wrapper is `1px` tall and is transparent and\n      // positioned at the top of the page. Inside that is an element that gets\n      // set to 1 billion pixels. Then reads the max height the browser can\n      // calculate.\n      var wrapper = document.createElement('div');\n      var fixture = document.createElement('div');\n\n      // As said above, these values get set to put the fixture elements into the\n      // right visual state.\n      HyperList.mergeStyle(wrapper, { position: 'absolute', height: '1px', opacity: 0 });\n      HyperList.mergeStyle(fixture, { height: '1e7px' });\n\n      // Add the fixture into the wrapper element.\n      wrapper.appendChild(fixture);\n\n      // Apply to the page, the values won't kick in unless this is attached.\n      document.body.appendChild(wrapper);\n\n      // Get the maximum element height in pixels.\n      var maxElementHeight = fixture.offsetHeight;\n\n      // Remove the element immediately after reading the value.\n      document.body.removeChild(wrapper);\n\n      return maxElementHeight;\n    }\n  }]);\n\n  function HyperList(element, userProvidedConfig) {\n    var _this = this;\n\n    _classCallCheck(this, HyperList);\n\n    this._config = {};\n    this._lastRepaint = null;\n    this._maxElementHeight = HyperList.getMaxBrowserHeight();\n\n    this.refresh(element, userProvidedConfig);\n\n    var config = this._config;\n\n    // Create internal render loop.\n    var render = function render() {\n      var scrollTop = _this._getScrollPosition();\n      var lastRepaint = _this._lastRepaint;\n\n      _this._renderAnimationFrame = window.requestAnimationFrame(render);\n\n      if (scrollTop === lastRepaint) {\n        return;\n      }\n\n      var diff = lastRepaint ? scrollTop - lastRepaint : 0;\n      if (!lastRepaint || diff < 0 || diff > _this._averageHeight) {\n        var rendered = _this._renderChunk();\n\n        _this._lastRepaint = scrollTop;\n\n        if (rendered !== false && typeof config.afterRender === 'function') {\n          config.afterRender();\n        }\n      }\n    };\n\n    render();\n  }\n\n  _createClass(HyperList, [{\n    key: 'destroy',\n    value: function destroy() {\n      window.cancelAnimationFrame(this._renderAnimationFrame);\n    }\n  }, {\n    key: 'refresh',\n    value: function refresh(element, userProvidedConfig) {\n      var _scrollerStyle;\n\n      Object.assign(this._config, defaultConfig, userProvidedConfig);\n\n      if (!element || element.nodeType !== 1) {\n        throw new Error('HyperList requires a valid DOM Node container');\n      }\n\n      this._element = element;\n\n      var config = this._config;\n\n      var scroller = this._scroller || config.scroller || document.createElement(config.scrollerTagName || 'tr');\n\n      // Default configuration option `useFragment` to `true`.\n      if (typeof config.useFragment !== 'boolean') {\n        this._config.useFragment = true;\n      }\n\n      if (!config.generate) {\n        throw new Error('Missing required `generate` function');\n      }\n\n      if (!isNumber(config.total)) {\n        throw new Error('Invalid required `total` value, expected number');\n      }\n\n      if (!Array.isArray(config.itemHeight) && !isNumber(config.itemHeight)) {\n        throw new Error('\\n        Invalid required `itemHeight` value, expected number or array\\n      '.trim());\n      } else if (isNumber(config.itemHeight)) {\n        this._itemHeights = Array(config.total).fill(config.itemHeight);\n      } else {\n        this._itemHeights = config.itemHeight;\n      }\n\n      // Width and height should be coerced to string representations. Either in\n      // `%` or `px`.\n      Object.keys(defaultConfig).filter(function (prop) {\n        return prop in config;\n      }).forEach(function (prop) {\n        var value = config[prop];\n        var isValueNumber = isNumber(value);\n\n        if (value && typeof value !== 'string' && typeof value !== 'number') {\n          var msg = 'Invalid optional `' + prop + '`, expected string or number';\n          throw new Error(msg);\n        } else if (isValueNumber) {\n          config[prop] = value + 'px';\n        }\n      });\n\n      var isHoriz = Boolean(config.horizontal);\n      var value = config[isHoriz ? 'width' : 'height'];\n\n      if (value) {\n        var isValueNumber = isNumber(value);\n        var isValuePercent = isValueNumber ? false : value.slice(-1) === '%';\n        // Compute the containerHeight as number\n        var numberValue = isValueNumber ? value : parseInt(value.replace(/px|%/, ''), 10);\n        var innerSize = window[isHoriz ? 'innerWidth' : 'innerHeight'];\n\n        if (isValuePercent) {\n          this._containerSize = innerSize * numberValue / 100;\n        } else {\n          this._containerSize = isNumber(value) ? value : numberValue;\n        }\n      }\n\n      var scrollContainer = config.scrollContainer;\n      var scrollerHeight = config.itemHeight * config.total;\n      var maxElementHeight = this._maxElementHeight;\n\n      if (scrollerHeight > maxElementHeight) {\n        console.warn(['HyperList: The maximum element height', maxElementHeight + 'px has', 'been exceeded; please reduce your item height.'].join(' '));\n      }\n\n      // Decorate the container element with styles that will match\n      // the user supplied configuration.\n      var elementStyle = {\n        width: '' + config.width,\n        height: scrollContainer ? scrollerHeight + 'px' : '' + config.height,\n        overflow: scrollContainer ? 'none' : 'auto',\n        position: 'relative'\n      };\n\n      HyperList.mergeStyle(element, elementStyle);\n\n      if (scrollContainer) {\n        HyperList.mergeStyle(config.scrollContainer, { overflow: 'auto' });\n      }\n\n      var scrollerStyle = (_scrollerStyle = {\n        opacity: '0',\n        position: 'absolute'\n      }, _defineProperty(_scrollerStyle, isHoriz ? 'height' : 'width', '1px'), _defineProperty(_scrollerStyle, isHoriz ? 'width' : 'height', scrollerHeight + 'px'), _scrollerStyle);\n\n      HyperList.mergeStyle(scroller, scrollerStyle);\n\n      // Only append the scroller element once.\n      if (!this._scroller) {\n        element.appendChild(scroller);\n      }\n\n      var padding = this._computeScrollPadding();\n      this._scrollPaddingBottom = padding.bottom;\n      this._scrollPaddingTop = padding.top;\n\n      // Set the scroller instance.\n      this._scroller = scroller;\n      this._scrollHeight = this._computeScrollHeight();\n\n      // Reuse the item positions if refreshed, otherwise set to empty array.\n      this._itemPositions = this._itemPositions || Array(config.total).fill(0);\n\n      // Each index in the array should represent the position in the DOM.\n      this._computePositions(0);\n\n      // Render after refreshing. Force render if we're calling refresh manually.\n      this._renderChunk(this._lastRepaint !== null);\n\n      if (typeof config.afterRender === 'function') {\n        config.afterRender();\n      }\n    }\n  }, {\n    key: '_getRow',\n    value: function _getRow(i) {\n      var config = this._config;\n      var item = config.generate(i);\n      var height = item.height;\n\n      if (height !== undefined && isNumber(height)) {\n        item = item.element;\n\n        // The height isn't the same as predicted, compute positions again\n        if (height !== this._itemHeights[i]) {\n          this._itemHeights[i] = height;\n          this._computePositions(i);\n          this._scrollHeight = this._computeScrollHeight(i);\n        }\n      } else {\n        height = this._itemHeights[i];\n      }\n\n      if (!item || item.nodeType !== 1) {\n        throw new Error('Generator did not return a DOM Node for index: ' + i);\n      }\n\n      addClass(item, config.rowClassName || 'vrow');\n\n      var top = this._itemPositions[i] + this._scrollPaddingTop;\n\n      HyperList.mergeStyle(item, _defineProperty({\n        position: 'absolute'\n      }, config.horizontal ? 'left' : 'top', top + 'px'));\n\n      return item;\n    }\n  }, {\n    key: '_getScrollPosition',\n    value: function _getScrollPosition() {\n      var config = this._config;\n\n      if (typeof config.overrideScrollPosition === 'function') {\n        return config.overrideScrollPosition();\n      }\n\n      return this._element[config.horizontal ? 'scrollLeft' : 'scrollTop'];\n    }\n  }, {\n    key: '_renderChunk',\n    value: function _renderChunk(force) {\n      var config = this._config;\n      var element = this._element;\n      var scrollTop = this._getScrollPosition();\n      var total = config.total;\n\n      var from = config.reverse ? this._getReverseFrom(scrollTop) : this._getFrom(scrollTop) - 1;\n\n      if (from < 0 || from - this._screenItemsLen < 0) {\n        from = 0;\n      }\n\n      if (!force && this._lastFrom === from) {\n        return false;\n      }\n\n      this._lastFrom = from;\n\n      var to = from + this._cachedItemsLen;\n\n      if (to > total || to + this._cachedItemsLen > total) {\n        to = total;\n      }\n\n      // Append all the new rows in a document fragment that we will later append\n      // to the parent node\n      var fragment = config.useFragment ? document.createDocumentFragment() : []\n      // Sometimes you'll pass fake elements to this tool and Fragments require\n      // real elements.\n\n\n      // The element that forces the container to scroll.\n      ;var scroller = this._scroller;\n\n      // Keep the scroller in the list of children.\n      fragment[config.useFragment ? 'appendChild' : 'push'](scroller);\n\n      for (var i = from; i < to; i++) {\n        var row = this._getRow(i);\n\n        fragment[config.useFragment ? 'appendChild' : 'push'](row);\n      }\n\n      if (config.applyPatch) {\n        return config.applyPatch(element, fragment);\n      }\n\n      element.innerHTML = '';\n      element.appendChild(fragment);\n    }\n  }, {\n    key: '_computePositions',\n    value: function _computePositions() {\n      var from = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n\n      var config = this._config;\n      var total = config.total;\n      var reverse = config.reverse;\n\n      if (from < 1 && !reverse) {\n        from = 1;\n      }\n\n      for (var i = from; i < total; i++) {\n        if (reverse) {\n          if (i === 0) {\n            this._itemPositions[0] = this._scrollHeight - this._itemHeights[0];\n          } else {\n            this._itemPositions[i] = this._itemPositions[i - 1] - this._itemHeights[i];\n          }\n        } else {\n          this._itemPositions[i] = this._itemHeights[i - 1] + this._itemPositions[i - 1];\n        }\n      }\n    }\n  }, {\n    key: '_computeScrollHeight',\n    value: function _computeScrollHeight() {\n      var _HyperList$mergeStyle2,\n          _this2 = this;\n\n      var config = this._config;\n      var isHoriz = Boolean(config.horizontal);\n      var total = config.total;\n      var scrollHeight = this._itemHeights.reduce(function (a, b) {\n        return a + b;\n      }, 0) + this._scrollPaddingBottom + this._scrollPaddingTop;\n\n      HyperList.mergeStyle(this._scroller, (_HyperList$mergeStyle2 = {\n        opacity: 0,\n        position: 'absolute',\n        top: '0px'\n      }, _defineProperty(_HyperList$mergeStyle2, isHoriz ? 'height' : 'width', '1px'), _defineProperty(_HyperList$mergeStyle2, isHoriz ? 'width' : 'height', scrollHeight + 'px'), _HyperList$mergeStyle2));\n\n      // Calculate the height median\n      var sortedItemHeights = this._itemHeights.slice(0).sort(function (a, b) {\n        return a - b;\n      });\n      var middle = Math.floor(total / 2);\n      var averageHeight = total % 2 === 0 ? (sortedItemHeights[middle] + sortedItemHeights[middle - 1]) / 2 : sortedItemHeights[middle];\n\n      var clientProp = isHoriz ? 'clientWidth' : 'clientHeight';\n      var element = config.scrollContainer ? config.scrollContainer : this._element;\n      var containerHeight = element[clientProp] ? element[clientProp] : this._containerSize;\n      this._screenItemsLen = Math.ceil(containerHeight / averageHeight);\n      this._containerSize = containerHeight;\n\n      // Cache 3 times the number of items that fit in the container viewport.\n      this._cachedItemsLen = Math.max(this._cachedItemsLen || 0, this._screenItemsLen * 3);\n      this._averageHeight = averageHeight;\n\n      if (config.reverse) {\n        window.requestAnimationFrame(function () {\n          if (isHoriz) {\n            _this2._element.scrollLeft = scrollHeight;\n          } else {\n            _this2._element.scrollTop = scrollHeight;\n          }\n        });\n      }\n\n      return scrollHeight;\n    }\n  }, {\n    key: '_computeScrollPadding',\n    value: function _computeScrollPadding() {\n      var config = this._config;\n      var isHoriz = Boolean(config.horizontal);\n      var isReverse = config.reverse;\n      var styles = window.getComputedStyle(this._element);\n\n      var padding = function padding(location) {\n        var cssValue = styles.getPropertyValue('padding-' + location);\n        return parseInt(cssValue, 10) || 0;\n      };\n\n      if (isHoriz && isReverse) {\n        return {\n          bottom: padding('left'),\n          top: padding('right')\n        };\n      } else if (isHoriz) {\n        return {\n          bottom: padding('right'),\n          top: padding('left')\n        };\n      } else if (isReverse) {\n        return {\n          bottom: padding('top'),\n          top: padding('bottom')\n        };\n      } else {\n        return {\n          bottom: padding('bottom'),\n          top: padding('top')\n        };\n      }\n    }\n  }, {\n    key: '_getFrom',\n    value: function _getFrom(scrollTop) {\n      var i = 0;\n\n      while (this._itemPositions[i] < scrollTop) {\n        i++;\n      }\n\n      return i;\n    }\n  }, {\n    key: '_getReverseFrom',\n    value: function _getReverseFrom(scrollTop) {\n      var i = this._config.total - 1;\n\n      while (i > 0 && this._itemPositions[i] < scrollTop + this._containerSize) {\n        i--;\n      }\n\n      return i;\n    }\n  }]);\n\n  return HyperList;\n}();\n\nexports.default = HyperList;\nmodule.exports = exports['default'];\n\n},{}]},{},[1])(1)\n});\n","/*\n * SPDX-FileCopyrightText: 2023 Siemens AG\n *\n * SPDX-License-Identifier: MIT\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n:host {\n  display: block;\n}\n","/*\n * SPDX-FileCopyrightText: 2023 Siemens AG\n *\n * SPDX-License-Identifier: MIT\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport {\n  Component,\n  Element,\n  Event,\n  EventEmitter,\n  h,\n  Host,\n  Prop,\n  Watch,\n} from '@stencil/core';\nimport Hyperlist from 'hyperlist';\nimport { renderDefaultItem } from '../tree-item/default-tree-item';\nimport {\n  TreeContext,\n  TreeItem,\n  TreeItemContext,\n  TreeItemVisual,\n  TreeModel,\n  UpdateCallback,\n} from './tree-model';\n\n@Component({\n  tag: 'ix-tree',\n  styleUrl: 'tree.css',\n  shadow: true,\n})\nexport class Tree {\n  @Element() hostElement!: HTMLIxTreeElement;\n\n  /**\n   * Initial root element will not be rendered\n   */\n  @Prop() root: string;\n\n  /**\n   * Tree model\n   */\n  @Prop() model: TreeModel<any>;\n\n  /**\n   * Render function of tree items\n   */\n  @Prop() renderItem: <T = any>(\n    index: number,\n    data: T,\n    dataList: Array<T>,\n    context: TreeContext,\n    update: (callback: UpdateCallback) => void\n  ) => HTMLElement;\n\n  /**\n   * Selection and collapsed state management\n   */\n  @Prop({ mutable: true }) context: TreeContext = {};\n\n  /**\n   * Context changed\n   */\n  @Event() contextChange: EventEmitter<TreeContext>;\n\n  /**\n   * Node toggled event\n   * @since 1.5.0\n   */\n  @Event() nodeToggled: EventEmitter<{ id: string; isExpaned: boolean }>;\n\n  /**\n   * Node clicked event\n   * @since 1.5.0\n   */\n  @Event() nodeClicked: EventEmitter<string>;\n\n  /**\n   * Emits removed nodes\n   */\n  @Event() nodeRemoved: EventEmitter<any>;\n\n  private hyperlist: Hyperlist;\n\n  private toggleListener = new Map<HTMLElement, Function>();\n  private itemClickListener = new Map<HTMLElement, Function>();\n  private updates = new Map<string, UpdateCallback>();\n  private observer: MutationObserver;\n  private hasFirstRender = false;\n\n  private updatePadding(element: HTMLElement, item: TreeItemVisual<unknown>) {\n    element.style.paddingLeft = item.level + 'rem';\n  }\n\n  private getVirtualizerOptions() {\n    const list = this.buildTreeList(this.model[this.root]);\n\n    let setToggleListener = (\n      item: TreeItemVisual<any>,\n      el: HTMLElement,\n      index: number\n    ) => {\n      if (item.hasChildren && !this.toggleListener.has(el)) {\n        const toggleCallback = (e: Event) => {\n          e.preventDefault();\n          e.stopPropagation();\n          const context = this.getContext(list[index].id);\n          context.isExpanded = !context.isExpanded;\n          this.nodeToggled.emit({ id: item.id, isExpaned: context.isExpanded });\n          this.setContext(item.id, context);\n        };\n        el.addEventListener('toggle', toggleCallback);\n        this.toggleListener.set(el, toggleCallback);\n      }\n    };\n\n    return {\n      itemHeight: 32,\n      total: list.length,\n      generate: (index: number) => {\n        const item = list[index];\n\n        const renderedTreeItem = this.hostElement.querySelector(\n          `[data-tree-node-id=\"${item.id}\"]`\n        ) as HTMLIxTreeItemElement;\n\n        const context = this.getContext(item.id);\n\n        if (renderedTreeItem) {\n          renderedTreeItem.hasChildren = item.hasChildren;\n          renderedTreeItem.context = { ...context };\n\n          setToggleListener(item, renderedTreeItem, index);\n\n          if (this.updates.has(item.id)) {\n            const doUpdate = this.updates.get(item.id);\n            doUpdate(item, { ...this.context });\n          }\n\n          this.updatePadding(renderedTreeItem, item);\n          return renderedTreeItem;\n        }\n\n        const update = (callback: UpdateCallback) => {\n          this.updates.set(item.id, callback);\n        };\n\n        let innerElement: HTMLElement | null = null;\n        if (this.renderItem) {\n          innerElement = this.renderItem(\n            index,\n            item,\n            list,\n            { ...this.context },\n            update\n          );\n        }\n\n        if (innerElement === null) {\n          innerElement = renderDefaultItem(item, context, update);\n        }\n\n        const el = innerElement;\n        el.setAttribute('data-tree-node-id', item.id);\n        el.style.paddingRight = '1rem';\n        this.updatePadding(el, item);\n\n        if (!this.itemClickListener.has(el)) {\n          const itemClickCallback = (e: Event) => {\n            e.preventDefault();\n            e.stopPropagation();\n            Object.values(this.context).forEach((c) => (c.isSelected = false));\n            const context = this.getContext(item.id);\n            context.isSelected = true;\n            this.setContext(item.id, context);\n            this.nodeClicked.emit(item.id);\n          };\n          el.addEventListener('itemClick', itemClickCallback);\n          this.itemClickListener.set(el, itemClickCallback);\n        }\n\n        setToggleListener(item, el, index);\n\n        return el;\n      },\n    };\n  }\n\n  private setContext(id: string, context: TreeItemContext) {\n    this.context = {\n      ...this.context,\n      [id]: context,\n    };\n\n    this.contextChange.emit(this.context);\n  }\n\n  private getContext(id: string): TreeItemContext {\n    if (!this.context) {\n      return {\n        isExpanded: false,\n        isSelected: false,\n      };\n    }\n    if (!this.context[id]) {\n      this.context[id] = {\n        isExpanded: false,\n        isSelected: false,\n      };\n    }\n    return this.context[id];\n  }\n\n  private buildTreeList(\n    root: TreeItem<any>,\n    level: number = 0\n  ): TreeItemVisual<any>[] {\n    const itemList: TreeItemVisual<any>[] = [];\n\n    if (root?.hasChildren) {\n      const newLevel = level + 1;\n      root.children.forEach((id: string) => {\n        const item = this.model[id];\n        const context = this.getContext(id);\n        itemList.push({ ...item, level });\n        if (item.hasChildren && context.isExpanded) {\n          itemList.push(...this.buildTreeList(item, newLevel));\n        }\n      });\n    }\n\n    return itemList;\n  }\n\n  componentDidLoad() {\n    this.initList();\n\n    this.observer = new MutationObserver((records) => {\n      let removed = [];\n\n      records.forEach((record) => {\n        removed = [...removed, ...Array.from(record.removedNodes)];\n\n        record.addedNodes.forEach((an) => {\n          const index = removed.indexOf(an);\n          if (index >= 0) {\n            removed.splice(index, 1);\n          }\n        });\n      });\n\n      this.nodeRemoved.emit(removed);\n    });\n\n    this.observer.observe(this.hostElement, {\n      childList: true,\n    });\n  }\n\n  componentWillRender() {\n    this.hasFirstRender = true;\n\n    if (this.isListInitialized()) {\n      this.refreshList();\n    } else {\n      this.initList();\n    }\n  }\n\n  disconnectedCallback() {\n    this.hyperlist?.destroy();\n    this.observer?.disconnect();\n  }\n\n  @Watch('model')\n  modelChange() {\n    if (this.hasFirstRender && !this.isListInitialized()) {\n      this.initList();\n    }\n  }\n\n  private isListInitialized() {\n    const itemPositions = this.hyperlist?._itemPositions;\n\n    return (\n      itemPositions !== undefined &&\n      itemPositions.length &&\n      !itemPositions?.some(\n        (item: number) => item === undefined || Number.isNaN(item)\n      )\n    );\n  }\n\n  private refreshList() {\n    if (this.hyperlist) {\n      this.hyperlist.refresh(this.hostElement, this.getVirtualizerOptions());\n    }\n  }\n\n  private initList() {\n    if (!this.model) {\n      return;\n    }\n\n    this.hyperlist?.destroy();\n    const config = this.getVirtualizerOptions();\n    this.hyperlist = new Hyperlist(this.hostElement, config);\n  }\n\n  render() {\n    return (\n      <Host>\n        <slot></slot>\n      </Host>\n    );\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}